--- drivers/acpi/acpi_memhotplug.c
+++ drivers/acpi/acpi_memhotplug.c
@@ -323,6 +363,7 @@ static int acpi_memory_device_add(struct acpi_device *device,
 	/* Get the range from the _CRS */
 	result = acpi_memory_get_device_resources(mem_device);
 	if (result) {
+		device->driver_data = NULL;
 		kfree(mem_device);
 		return result;
 	}
